$(function(){var ballList=[];var canvas,ctx,cw,ch;function initBall(){canvas=document.getElementById('ball');ctx=canvas.getContext('2d');cw=canvas.width;ch=canvas.height;for(var i=0;i<120;i+=1){var ball={};ball.xPointer=getRandom(20,cw-20);ball.yPointer=getRandom(20,ch-20);ball.x=getIndex();ball.y=getIndex();ball.vx=Math.random()*0.3+0.3;ball.vy=Math.random()*0.3+0.3;ball.radius=5;ball.color=getRandomColor();ballList.push(ball)}}function getIndex(){var arr=[0,1];var index=Math.floor(Math.random()*arr.length);if(index==0){index=-1}return index}function getRandom(first,last){var choice=last-first+1;return Math.floor(Math.random()*choice+first)}function getRandomColor(){var str="0123456789ABCDEF";var color="#";for(var i=0;i<6;i+=1){var a=getRandom(0,15);color=color+str.charAt(a)}return color}function draw(ctx){ctx.clearRect(0,0,cw,ch);for(var i=0;i<ballList.length;i+=1){ctx.save();ctx.beginPath();ctx.fillStyle=ballList[i].color;ctx.arc(ballList[i].xPointer,ballList[i].yPointer,ballList[i].radius,0,Math.PI*2,false);ctx.closePath();ctx.fill();ctx.restore()}}function update(ballList,ctx){for(var i=0;i<ballList.length;i+=1){ballList[i].xPointer+=ballList[i].vx*ballList[i].x;ballList[i].yPointer+=ballList[i].vy*ballList[i].y;if(ballList[i].xPointer<ballList[i].radius*2||ballList[i].xPointer>cw-ballList[i].radius*2){ballList[i].x= -ballList[i].x}if(ballList[i].yPointer<ballList[i].radius*2||ballList[i].yPointer>ch-ballList[i].radius*2){ballList[i].y= -ballList[i].y}}for(var i=0;i<getRandom(0,30);i+=1){ballList[i].color=getRandomColor()}}function drawLine(ballList,ctx){for(var i=0;i<ballList.length;i+=1){for(var j=0;j<ballList.length;j+=1){var x=Math.pow(ballList[i].xPointer-ballList[j].xPointer,2);var y=Math.pow(ballList[i].yPointer-ballList[j].yPointer,2);var l=Math.sqrt(x+y);if(l<50&&l>20){ctx.save();ctx.beginPath();ctx.strokeStyle="#fff";ctx.lineWidth=0.1;ctx.moveTo(ballList[i].xPointer,ballList[i].yPointer);ctx.lineTo(ballList[j].xPointer,ballList[j].yPointer);ctx.closePath();ctx.stroke();ctx.restore()}}}}function play(){$('#ball').width($(window).width());$('#ball').height($('#ball').width*0.1);initBall();timer=setInterval(function(){draw(ctx);update(ballList,ctx);drawLine(ballList,ctx)},24)}play();$(window).resize(function(){console.log(1);clearInterval(timer);ballList=[];play()})});